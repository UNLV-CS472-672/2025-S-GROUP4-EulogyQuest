# ai-gen start (ChatGPT-4o, 1)
name: Perl Lint

on:
  pull_request:
    branches: [master]

jobs:
  perl_lint:
    name: ðŸ”Ž Perl::Lint
    runs-on: ubuntu-latest

    steps:

      - name: Communicate start
        run: echo "Perl Lint workflow started!"

      - name: Checkout repo
        uses: actions/checkout@v3

      - name: Set up Perl
        uses: shogo82148/actions-setup-perl@v1
        with:
          perl-version: '5.36'

      - name: Install Perl::Lint
        run: |
          cpanm --notest Perl::Lint

      - name: Run Perl::Lint
        run: |
          echo "Running Perl::Lint..."
          FILES=$(find . \( -name '*.pl' -o -name '*.pm' -o -name '*.t' \))
          if [ -n "$FILES" ]; then
            echo "$FILES" | tr '\n' '\0' \
              perl -MPerl::Lint::Linter -e 'Perl::Lint::Linter->new->lint(@ARGV)' $(find . -name '*.pl' -o -name '*.pm' -o -name '*.t')
          else
            echo "No Perl files to lint."
          fi
# ai-gen end